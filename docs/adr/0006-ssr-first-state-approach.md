# ADR-0006: SSRファーストの状態管理方針（グローバルクライアント状態は不採用）

## ステータス
提案中

## コンテキスト
- ADR-0001 で Hono + React による SSR を採用。
- 初期表示データはサーバー側で統合（GitHub API + CSV）し、HTMLへ埋め込む。
- 現状の要件では、ページ横断で共有すべきクライアント側グローバル状態の必要性が薄い。

## 検討した選択肢
- グローバル状態管理の導入（Zustand/Redux/Jotai 等）
- 導入しない（SSR + コンポーネントローカル状態 + URL/フォーム/遷移）

## 決定
- グローバルクライアント状態管理は導入しない。
- サーバーを単一の信頼できるソースとし、クライアントは表示責務と軽微な UI 状態（ソート、フィルタ、開閉）に限定。

## 理由
1. SSR 前提で要件を満たせる（初期データ・再計算はサーバー起点）。
2. 依存と複雑性を削減し、バンドルを最小化。
3. データ整合性を保ちやすく、テスト容易性が高い。

## 実装ガイド
- ページデータ：サーバーで集約し、`props` としてコンポーネントへ受け渡し。
- UI 一時状態：`useState`/`useMemo` などのローカル状態を使用。
- 変更操作：フォーム送信やリンク遷移でサーバーへ反映（PRGパターン）。
- 状態共有が必要な場合：URL クエリやサーバーセッション（必要最小限）を使用。
- リアルタイム要件が出た場合：SSE/WebSocket を別途 ADR で検討。

## 将来の再検討条件
- 複数島（islands）間での高度な双方向連携が増えた。
- オフライン/ローカル永続化が必要になった。
- ページ横断で共有すべきクライアント状態が明確に発生。

## 影響
- ポジティブ：単純化、パフォーマンス、整合性の向上。
- ネガティブ：高度なクライアント内連携が必要な場合の柔軟性低下。

## 関連
- 置き換え/補足: ADR-0002（廃止）
- 参照: ADR-0001（SSR 採用）
