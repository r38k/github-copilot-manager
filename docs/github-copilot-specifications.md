# GitHub Copilot 仕様書

## 概要
GitHub Copilotは、開発者の生産性向上を支援するAIペアプログラミングツールです。組織単位でライセンスを管理し、月額制のサブスクリプションモデルで提供されています。

## プラン詳細

### Copilot Business
- **月額料金**: $19/ユーザー/月（税別）
- **対象**: 組織・チーム向け

### Copilot Enterprise
- **月額料金**: $39/ユーザー/月（税別）
- **追加機能**: カスタムモデル、高度な分析機能

## 利用制限とレート制御

- サブスクリプションはシート単位の定額課金で、公開された「月間クレジット上限」はありません。
- 実際の利用はフェアユースとレート制限により制御され、リクエスト頻度や連続利用に応じて一時的に制限される場合があります。
- 管理者は利用状況メトリクス（提案数、受け入れ率、チャットのやり取り回数、最終アクティビティ等）を用いて運用を最適化します。

## 請求システム

### 請求サイクル
1. **開始日起点制**: 組織での利用開始日が請求サイクルの起点となる
2. **月割計算**: 月の途中から開始した場合、日割りで計算される
3. **請求タイミング**: 請求サイクル終了後に請求書が発行される

### 請求計算例
```
例: 8月15日に5ライセンスで利用開始
- 8月分: 8/15〜8/31（16日間）
- 計算: 5ライセンス × (16/31) ≈ 2.58ライセンス-month
- 請求額: 2.58 × $19 = $49.02（税別）
- 請求書発行: 9月15日

次回請求サイクル: 9/15〜10/14
```

### ライセンス-monthの計算
```
ライセンス-month = アクティブユーザー数 × (使用日数 / 月の日数)
```

## ユーザーアクティビティ

### アクティブユーザーの定義
- **アクティブユーザー**: ライセンスが割り当てられているユーザー
- **エンゲージユーザー**: 実際にCopilotを使用したユーザー
- **非アクティブ期間**: 30日間使用がない場合、非アクティブとして識別可能

### 最終アクティビティの追跡
- APIで各ユーザーの`last_activity_at`を取得可能
- 使用エディタ（VSCode、IntelliJ等）も記録される
- 非アクティブユーザーの特定に活用

## シート（ライセンス）管理

### シート割り当て方式
| 設定 | 説明 | 用途 |
|------|------|------|
| `assign_all` | 全組織メンバーに自動割り当て | 全員利用を前提とする組織 |
| `assign_selected` | 選択したメンバーのみ | コスト管理を重視する組織 |
| `disabled` | Copilotを無効化 | 一時停止時 |

### シート管理のベストプラクティス
1. **定期的な監査**: 月次で非アクティブユーザーを確認
2. **段階的展開**: 初期は選択的割り当てで開始
3. **チーム単位管理**: 部門やプロジェクト単位での割り当て
4. **自動化**: APIを使用した割り当て/解除の自動化

## 使用状況の監視

### メトリクスAPI
- 日次/週次/月次の集計データ
- 言語別・エディタ別の使用統計
- コード提案数と受け入れ率、チャットのやり取り回数

### 主要KPI
| メトリクス | 説明 | 目標値 |
|-----------|------|--------|
| 受け入れ率 | 提案されたコードの採用率 | 30%以上 |
| アクティブ率 | ライセンス保有者の使用率 | 80%以上 |
| ROI | 生産性向上による投資対効果 | 2倍以上 |

## コスト最適化戦略

### コスト削減のアプローチ
1. **非アクティブユーザーの特定と解除**
   - 30日以上未使用のユーザーを定期チェック
   - 自動解除ワークフローの実装

2. **使用パターンの分析**
   - 高頻度利用や低採用率のユーザーの特定
   - 効率的な使用方法の教育

3. **請求サイクルの最適化**
   - 月初/月末の追加・削除タイミング調整
   - バッチ処理による管理コスト削減

## データ取得方法

### API経由
- リアルタイムのシート状況
- アクティビティ履歴
- 使用メトリクス

### CSV/レポート
- 使用メトリクス（提案数、受け入れ率、最終アクティビティ等）
- ユーザー別の詳細分析
- 手動ダウンロードが必要

## セキュリティとコンプライアンス

### データプライバシー
- コードスニペットは一時的にのみ処理
- 組織のコードは学習に使用されない（Businessプラン以上）

### アクセス制御
- GitHub組織の権限と連動
- きめ細かいアクセス制御が可能

## トラブルシューティング

### よくある課題と対策
| 課題 | 原因 | 対策 |
|------|------|------|
| 高額請求 | 非アクティブユーザーの放置 | 定期的な監査と解除 |
| 低採用率 | 教育不足 | トレーニングセッション実施 |
| レート制限到達 | 短時間に過度の呼び出し | 利用の平準化・クエリ見直し |
